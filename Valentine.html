<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ma Valentine üíñ</title>

<style>
    body {
        margin: 0;
        font-family: 'Segoe UI', sans-serif;
        background: linear-gradient(135deg, #ffdde1, #ee9ca7);
        overflow: hidden;
        text-align: center;
        color: #b30047;
    }

    .password-screen, .container, .final-message {
        position: absolute;
        inset: 0;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 20px;
    }

    .container, .final-message {
        display: none;
    }

    input, button {
        padding: 12px 20px;
        border-radius: 25px;
        border: none;
        font-size: 16px;
        margin: 10px;
    }

    button {
        background: #ff4d6d;
        color: white;
        cursor: pointer;
        transition: transform 0.2s, box-shadow 0.2s;
        box-shadow: 0 8px 20px rgba(0,0,0,0.2);
    }

    button:hover {
        transform: scale(1.1);
    }

    .buttons {
        position: relative;
        width: 300px;
        height: 120px;
    }

    #noBtn {
        position: absolute;
        background: #999;
    }

    .flowers {
        position: absolute;
        inset: 0;
        pointer-events: none;
    }

    .flower {
        position: absolute;
        font-size: 32px;
        animation: float 8s linear infinite;
    }

    @keyframes float {
        from {
            transform: translateY(100vh) rotate(0deg);
            opacity: 1;
        }
        to {
            transform: translateY(-10vh) rotate(360deg);
            opacity: 0;
        }
    }

    canvas {
        position: fixed;
        inset: 0;
        pointer-events: none;
    }

    .final-message {
        background: rgba(255,255,255,0.85);
        border-radius: 20px;
        max-width: 600px;
        margin: auto;
        animation: fadeIn 2s ease forwards;
        padding: 40px;
    }

    @keyframes fadeIn {
        from { opacity: 0; transform: scale(0.95); }
        to { opacity: 1; transform: scale(1); }
    }
</style>
</head>
<body>

<audio id="music" loop>
    <source src="https://www.soundhelix.com/examples/mp3/SoundHelix-Song-1.mp3" type="audio/mpeg">
</audio>

<div class="password-screen">
    <h2>üíå Acc√®s priv√©</h2>
    <input type="password" id="passwordInput" placeholder="Mot de passe">
    <button onclick="checkPassword()">Entrer üíñ</button>
</div>

<div class="container">
    <h1>üåπ Salohy Fidilalaina, veux-tu √™tre ma Valentine ? üåπ</h1>

    <div class="buttons">
        <button onclick="accept(event)">üíñ OUI üíñ</button>
        <button id="noBtn">‚ùå Non</button>
    </div>
</div>

<div class="final-message" id="final">
    <p>
        ¬´ Ce qui rend belle une femme, ce n'est pas son visage, son nez, sa bouche,
        ses yeux, ses seins, ses jambes, ni son corps.<br><br>
        C'est l'in√©branlable force int√©rieure avec laquelle elle porte ses blessures,
        sa fragilit√© devant tous. ¬ª
    </p>
    <p>
        Et pour moi tu as cette force int√©rieure et saches que je suis si fi√®re de toi
        et je t'aime beaucoup ‚ù§Ô∏è
    </p>
</div>

<div class="flowers"></div>
<canvas id="fireworks"></canvas>

<script>
    const SECRET = "amour";
    const music = document.getElementById("music");

    function checkPassword() {
        const input = document.getElementById("passwordInput").value;
        if (input.toLowerCase() === SECRET) {
            document.querySelector(".password-screen").style.display = "none";
            document.querySelector(".container").style.display = "flex";
            // La musique se lance ici car l'utilisateur a interagi avec la page
            music.play().catch(e => console.log("L'autoplay a √©t√© bloqu√©, il attendra le prochain clic."));
        } else {
            alert("Mauvais mot de passe... Petit indice : c'est un sentiment fort ‚ù§Ô∏è");
        }
    }

    const noBtn = document.getElementById("noBtn");
    noBtn.addEventListener("mouseover", moveNo);
    noBtn.addEventListener("touchstart", moveNo);

    function moveNo() {
        const x = Math.random() * (window.innerWidth - 100);
        const y = Math.random() * (window.innerHeight - 50);
        noBtn.style.position = "fixed";
        noBtn.style.left = x + "px";
        noBtn.style.top = y + "px";
    }

    function accept(e) {
        e.preventDefault();
        document.querySelector(".container").style.display = "none";
        document.getElementById("final").style.display = "flex";
        music.play(); // S'assure que la musique joue bien

        for (let i = 0; i < 300; i++) {
            particles.push({
                x: canvas.width / 2,
                y: canvas.height / 2,
                vx: (Math.random() - 0.5) * 12,
                vy: (Math.random() - 0.5) * 12,
                life: 140
            });
        }
    }

    const flowers = ["üåπ","üå∏","üå∫","üíê","üå∑","üåº"];
    const flowerContainer = document.querySelector(".flowers");

    setInterval(() => {
        const f = document.createElement("div");
        f.className = "flower";
        f.textContent = flowers[Math.floor(Math.random()*flowers.length)];
        f.style.left = Math.random()*100 + "vw";
        flowerContainer.appendChild(f);
        setTimeout(() => f.remove(), 10000);
    }, 300);

    const canvas = document.getElementById("fireworks");
    const ctx = canvas.getContext("2d");
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    let particles = [];

    function animate() {
        ctx.clearRect(0,0,canvas.width,canvas.height);
        particles.forEach((p,i)=>{
            p.x+=p.vx; p.y+=p.vy; p.life--;
            ctx.fillStyle=`hsl(${Math.random()*360},100%,70%)`;
            ctx.beginPath(); ctx.arc(p.x,p.y,3,0,Math.PI*2); ctx.fill();
            if(p.life<=0) particles.splice(i,1);
        });
        requestAnimationFrame(animate);
    }
    animate();
</script>

</body>
</html>
